# NGINX Configuration File for Mini GitOps Project

# Global settings
worker_processes auto;  # Automatically choose number of processes based on CPU cores

events {
    worker_connections 1024;  # Maximum number of simultaneous connections per worker process
}

http {
    include       mime.types;  # Defines types based on file extensions
    default_type  application/octet-stream;  # Default MIME type

    # Logging settings
    access_log  logs/access.log;  # Path to the access log file
    error_log   logs/error.log;   # Path to the error log file

    sendfile        on;  # Enable efficient file transfer
    keepalive_timeout  65;  # Timeout for keeping connections alive

    # Server block (handling HTTP requests)
    server {
        listen       80;  # Listen on port 80 (HTTP)
        server_name  localhost;  # Server name (use localhost for local development)

        # Location block for serving static content
        location / {
            root   D:/workflow/nginx-gitops/src/html;  # Serve files from this directory
            index  index.html;  # Default file to serve
        }

        # Error page for 404 (Not Found)
        error_page  404 /404.html;

        # Location block for serving custom 404 error page
        location = /404.html {
            root   D:/workflow/nginx-gitops/src/html;  # Serve the custom 404 page
        }
    }
}
